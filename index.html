<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For You ‚ù§Ô∏è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-red: #C41E3A;
            --burgundy: #5A1F2D;
            --dark-red: #8B0000;
            --soft-pink: #FFB6C1;
            --light-pink: #FFC0CB;
            --cream: #FFF8F3;
            --paper-white: #FFFAF5;
            --text-dark: #2C2C2C;
            --gold: #D4AF37;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: 'Georgia', 'Palatino', serif;
            background: linear-gradient(135deg, var(--cream) 0%, #FFF0F5 100%);
            color: var(--text-dark);
            background-attachment: fixed;
        }

        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-red) 0%, var(--burgundy) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            animation: fadeOutLoading 0.8s ease-out 2.5s forwards;
        }

        @keyframes fadeOutLoading {
            to {
                opacity: 0;
                visibility: hidden;
            }
        }

        .loading-text {
            font-size: 2.5rem;
            color: white;
            text-align: center;
            animation: scaleIn 0.6s ease-out;
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .main-container {
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: relative;
        }

        .page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.6s ease-out, visibility 0.6s ease-out;
            z-index: 10;
            padding-top: 60px;
            padding-bottom: 100px;
            scroll-behavior: smooth;
        }

        .page.active {
            opacity: 1;
            visibility: visible;
            z-index: 20;
        }

        .page-content {
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: calc(100vh - 160px);
            position: relative;
            z-index: 2;
        }

        .page-title {
            font-size: 2.8rem;
            color: var(--primary-red);
            text-align: center;
            margin-bottom: 40px;
            letter-spacing: 2px;
            animation: slideInTitle 0.6s ease-out;
        }

        @keyframes slideInTitle {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .scrapbook-card {
            background: var(--paper-white);
            padding: 40px;
            border-radius: 8px;
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.1),
                -2px 2px 5px rgba(0, 0, 0, 0.05),
                inset 0 1px 0px rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(196, 30, 58, 0.1);
            animation: cardAppear 0.6s ease-out;
            position: relative;
            overflow: hidden;
        }

        @keyframes cardAppear {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* PASSWORD PAGE */
        #page-password {
            background: linear-gradient(135deg, var(--light-pink) 0%, #FFD4E5 100%);
        }

        .password-card {
            width: 100%;
            max-width: 500px;
            text-align: center;
        }

        .password-title {
            font-size: 2.5rem;
            color: var(--primary-red);
            margin-bottom: 15px;
            letter-spacing: 1px;
        }

        .password-subtitle {
            font-size: 1.2rem;
            color: var(--text-dark);
            opacity: 0.7;
            margin-bottom: 40px;
        }

        .password-input-wrapper {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .password-input {
            flex: 1;
            min-width: 200px;
            padding: 15px 20px;
            font-size: 1.1rem;
            border: 2px solid var(--primary-red);
            border-radius: 6px;
            background: white;
            color: var(--primary-red);
            text-align: center;
            letter-spacing: 3px;
            transition: all 0.3s ease;
        }

        .password-input:focus {
            outline: none;
            box-shadow: 0 0 20px rgba(196, 30, 58, 0.4);
            border-color: var(--dark-red);
            transform: scale(1.02);
        }

        .password-btn {
            padding: 15px 30px;
            font-size: 1rem;
            font-weight: bold;
            background: var(--primary-red);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 1px;
            text-transform: uppercase;
            min-width: 120px;
        }

        .password-btn:hover {
            background: var(--dark-red);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(196, 30, 58, 0.4);
        }

        .error-message {
            color: #E74C3C;
            font-size: 0.95rem;
            min-height: 20px;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% {
                transform: translateX(0);
            }
            25% {
                transform: translateX(-8px);
            }
            75% {
                transform: translateX(8px);
            }
        }

        /* TIMER PAGE */
        #page-timer {
            background: linear-gradient(135deg, #FFE5E5 0%, #FFF0F0 100%);
        }

        .timer-card {
            width: 100%;
            max-width: 700px;
        }

        .timer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .timer-unit {
            background: linear-gradient(135deg, var(--soft-pink) 0%, var(--light-pink) 100%);
            padding: 25px 20px;
            border-radius: 6px;
            text-align: center;
            border: 2px solid var(--primary-red);
            box-shadow: 0 4px 15px rgba(196, 30, 58, 0.1);
            animation: floatUp 0.6s ease-out;
        }

        @keyframes floatUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .timer-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-red);
            margin-bottom: 8px;
            font-family: 'Courier New', monospace;
        }

        .timer-label {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-dark);
            opacity: 0.8;
        }

        /* MOVIE PAGE */
        #page-movie {
            background: linear-gradient(135deg, #f5f5f5 0%, #efefef 100%);
        }

        .movie-card {
            width: 100%;
            max-width: 700px;
        }

        .polaroid-frame {
            background: white;
            padding: 15px;
            box-shadow: 
                0 15px 40px rgba(0, 0, 0, 0.15),
                inset 0 1px 0px rgba(255, 255, 255, 0.8);
            border-radius: 3px;
            position: relative;
        }

        .film-strip-top,
        .film-strip-bottom {
            width: 100%;
            height: 25px;
            background: #2a2a2a;
            background-image: repeating-linear-gradient(
                90deg,
                #1a1a1a 0px,
                #1a1a1a 20px,
                #3a3a3a 20px,
                #3a3a3a 23px,
                #2a2a2a 23px,
                #2a2a2a 43px
            );
            margin: 0 -15px;
        }

        .film-strip-bottom {
            margin-top: 10px;
        }

        .movie-video {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 2px;
            margin: 15px 0;
            background: #000;
            max-height: 400px;
        }

        .polaroid-caption {
            font-size: 1.1rem;
            color: var(--text-dark);
            margin-top: 20px;
            text-align: center;
            opacity: 0.7;
            font-style: italic;
        }

        /* SPOTIFY PAGE */
        #page-spotify {
            background: linear-gradient(135deg, #f5f5f5 0%, #efefef 100%);
        }

        .spotify-card {
            width: 100%;
            max-width: 600px;
        }

        .spotify-embed-wrapper {
            width: 100%;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #f5f5f5 0%, #efefef 100%);
            border-radius: 6px;
            margin: 30px 0;
            border: 2px dashed var(--primary-red);
        }

        .spotify-placeholder {
            text-align: center;
            color: var(--text-dark);
            opacity: 0.5;
            padding: 20px;
        }

        .spotify-embed-wrapper iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 6px;
        }

        .spotify-caption {
            font-size: 1.1rem;
            color: var(--text-dark);
            text-align: center;
            opacity: 0.7;
            font-style: italic;
            margin-top: 20px;
        }

        /* LETTER PAGE */
        #page-letter {
            background: linear-gradient(135deg, #FFF8DC 0%, #FFE4B5 100%);
        }

        #envelopeContainer {
            width: 100%;
            max-width: 700px;
            perspective: 1000px;
            position: relative;
            min-height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .envelope {
            width: 100%;
            max-width: 500px;
            background: #FFF8DC;
            border: 3px solid var(--primary-red);
            border-radius: 5px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            animation: envelopeAppear 0.6s ease-out;
            position: relative;
        }

        @keyframes envelopeAppear {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .envelope:hover {
            transform: translateY(-10px);
            box-shadow: 0 25px 50px rgba(196, 30, 58, 0.2);
        }

        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 40%;
            background: var(--primary-red);
            border-radius: 5px 5px 0 0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.4s ease;
            transform-origin: top;
        }

        .envelope.opened .envelope-flap {
            transform: rotateX(-180deg);
        }

        .heart-stamp {
            font-size: 2rem;
            animation: stampPulse 1s ease-in-out infinite;
        }

        @keyframes stampPulse {
            0%, 100% {
                transform: scale(1) rotate(0deg);
            }
            50% {
                transform: scale(1.1) rotate(-5deg);
            }
        }

        .envelope-body {
            padding-top: 50px;
        }

        .envelope-text {
            font-size: 1.3rem;
            color: var(--primary-red);
            letter-spacing: 1px;
        }

        .letter-opened {
            position: absolute;
            width: 100%;
            opacity: 0;
            visibility: hidden;
            transform: scale(0.8);
            transition: all 0.6s ease-out;
        }

        .letter-opened.show {
            opacity: 1;
            visibility: visible;
            transform: scale(1);
        }

        .letter-card {
            width: 100%;
            background: linear-gradient(135deg, #FFF8DC 0%, #FFFACD 100%);
            border: 2px dashed var(--primary-red);
            padding: 50px;
        }

        .letter-title {
            font-size: 1.8rem;
            color: var(--primary-red);
            margin-bottom: 30px;
            text-align: center;
            letter-spacing: 2px;
        }

        .letter-content {
            font-size: 1.05rem;
            line-height: 1.8;
            color: var(--text-dark);
            text-align: justify;
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .letter-content::-webkit-scrollbar {
            width: 6px;
        }

        .letter-content::-webkit-scrollbar-track {
            background: #F0E68C;
        }

        .letter-content::-webkit-scrollbar-thumb {
            background: var(--primary-red);
            border-radius: 3px;
        }

        .letter-signature {
            margin-top: 30px;
            font-size: 1rem;
            color: var(--primary-red);
            text-align: right;
            font-style: italic;
        }

        .close-letter-btn {
            margin-top: 30px;
            padding: 12px 30px;
            background: var(--primary-red);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .close-letter-btn:hover {
            background: var(--dark-red);
            transform: translateY(-2px);
        }

        .close-letter-btn.hidden {
            display: none;
        }

        /* FLOWERS PAGE */
        #page-flowers {
            background: linear-gradient(135deg, var(--light-pink) 0%, #FFD4E5 100%);
        }

        .flower-card {
            width: 100%;
            max-width: 500px;
            animation: tiltCard 0.6s ease-out;
        }

        @keyframes tiltCard {
            from {
                opacity: 0;
                transform: perspective(600px) rotateX(20deg) rotateY(-10deg);
            }
            to {
                opacity: 1;
                transform: perspective(600px) rotateX(0) rotateY(0);
            }
        }

        .flower-polaroid {
            transform: rotate(-1deg);
            transition: transform 0.3s ease;
        }

        .flower-polaroid:hover {
            transform: rotate(1deg);
        }

        .flower-image {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 2px;
            background: var(--light-pink);
        }

        .rose-petals {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 15;
        }

        .petal {
            position: fixed;
            width: 20px;
            height: 20px;
            pointer-events: none;
            animation: fallPetal 6s linear forwards;
            opacity: 0.7;
        }

        @keyframes fallPetal {
            0% {
                transform: translateY(-50px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* NAVIGATION */
        .navigation {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 25px;
            border-radius: 50px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            z-index: 50;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(196, 30, 58, 0.1);
        }

        .nav-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid var(--primary-red);
            background: white;
            color: var(--primary-red);
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .nav-btn:hover:not(:disabled) {
            background: var(--light-pink);
            transform: scale(1.1);
        }

        .nav-btn.active {
            background: var(--primary-red);
            color: white;
            box-shadow: 0 0 20px rgba(196, 30, 58, 0.5);
        }

        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .music-toggle {
            position: fixed;
            bottom: 120px;
            right: 30px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary-red);
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(196, 30, 58, 0.3);
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .music-toggle:hover {
            background: var(--dark-red);
            transform: scale(1.1);
        }

        @media (max-width: 768px) {
            .page-title {
                font-size: 2rem;
                margin-bottom: 30px;
            }

            .scrapbook-card {
                padding: 30px 20px;
            }

            .password-card {
                padding: 30px 20px;
            }

            .timer-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .timer-number {
                font-size: 2rem;
            }

            .navigation {
                bottom: 20px;
                gap: 8px;
                padding: 12px 15px;
            }

            .nav-btn {
                width: 36px;
                height: 36px;
                font-size: 0.9rem;
            }

            .music-toggle {
                bottom: 100px;
                width: 45px;
                height: 45px;
                font-size: 1.2rem;
            }
        }

        @media (max-width: 480px) {
            .page-title {
                font-size: 1.5rem;
                margin-bottom: 20px;
            }

            .timer-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .timer-unit {
                padding: 15px 10px;
            }

            .timer-number {
                font-size: 1.5rem;
            }

            .password-input-wrapper {
                flex-direction: column;
            }

            .password-input {
                width: 100%;
            }

            .password-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-text">üíå A gift, just for you üíå</div>
        </div>
    </div>

    <!-- Background Music -->
    <audio id="bgMusic" loop preload="auto">
        <source src="background.mp3" type="audio/mpeg">
    </audio>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Music Toggle Button -->
        <button id="musicToggle" class="music-toggle" title="Toggle music">
            <span class="music-icon">üîá</span>
        </button>

        <!-- PAGE 1: PASSWORD -->
        <section id="page-password" class="page active">
            <div class="page-content">
                <div class="password-card scrapbook-card">
                    <h1 class="password-title">Only for you ‚ù§Ô∏è</h1>
                    <p class="password-subtitle">Enter the magic word</p>
                    
                    <div class="password-input-wrapper">
                        <input 
                            type="password" 
                            id="passwordInput" 
                            class="password-input"
                            placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                            autocomplete="off"
                        >
                        <button id="passwordBtn" class="password-btn">Enter</button>
                    </div>
                    
                    <p id="passwordError" class="error-message"></p>
                </div>
            </div>
        </section>

        <!-- PAGE 2: TIMER -->
        <section id="page-timer" class="page">
            <div class="page-content">
                <h1 class="page-title">Since 16 December 2025 ‚ù§Ô∏è</h1>
                
                <div class="scrapbook-card timer-card">
                    <div class="timer-grid">
                        <div class="timer-unit">
                            <div class="timer-number" id="timerYears">0</div>
                            <div class="timer-label">Years</div>
                        </div>
                        <div class="timer-unit">
                            <div class="timer-number" id="timerMonths">0</div>
                            <div class="timer-label">Months</div>
                        </div>
                        <div class="timer-unit">
                            <div class="timer-number" id="timerDays">0</div>
                            <div class="timer-label">Days</div>
                        </div>
                        <div class="timer-unit">
                            <div class="timer-number" id="timerHours">0</div>
                            <div class="timer-label">Hours</div>
                        </div>
                        <div class="timer-unit">
                            <div class="timer-number" id="timerMinutes">0</div>
                            <div class="timer-label">Minutes</div>
                        </div>
                        <div class="timer-unit">
                            <div class="timer-number" id="timerSeconds">0</div>
                            <div class="timer-label">Seconds</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PAGE 3: MOVIE -->
        <section id="page-movie" class="page">
            <div class="page-content">
                <h1 class="page-title">This Reminded Me of You üé¨</h1>
                
                <div class="scrapbook-card movie-card">
                    <div class="polaroid-frame">
                        <div class="film-strip-top"></div>
                        <video 
                            id="movieVideo" 
                            class="movie-video" 
                            controls
                            crossorigin="anonymous"
                        >
                            <source src="your-video.mp4" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                        <div class="film-strip-bottom"></div>
                    </div>
                    
                    <p class="polaroid-caption">Our special moment üéûÔ∏è</p>
                </div>
            </div>
        </section>

        <!-- PAGE 4: SPOTIFY -->
        <section id="page-spotify" class="page">
            <div class="page-content">
                <h1 class="page-title">Our Playlist üéß</h1>
                
                <div class="scrapbook-card spotify-card">
                    <div class="spotify-embed-wrapper" id="spotifyWrapper">
                        <div class="spotify-placeholder">
                            <p>üéµ Paste your Spotify embed here üéµ</p>
                        </div>
                    </div>
                    
                    <p class="spotify-caption">Every song reminds me of you ‚ô™</p>
                </div>
            </div>
        </section>

        <!-- PAGE 5: LETTER -->
        <section id="page-letter" class="page">
            <div class="page-content">
                <div id="envelopeContainer">
                    <!-- Closed Envelope -->
                    <div class="envelope" id="envelope">
                        <div class="envelope-flap">
                            <div class="heart-stamp">‚ù§Ô∏è</div>
                        </div>
                        <div class="envelope-body">
                            <p class="envelope-text">Open with love üíå</p>
                        </div>
                    </div>

                    <!-- Opened Letter -->
                    <div class="letter-opened" id="letterOpened">
                        <div class="scrapbook-card letter-card">
                            <h2 class="letter-title">A Letter For You</h2>
                            <div class="letter-content" id="letterContent">
                                <!-- Letter will be typed here -->
                            </div>
                            <div class="letter-signature">With all my love ‚ù§Ô∏è</div>
                        </div>
                    </div>
                </div>

                <button id="closeLetterBtn" class="close-letter-btn hidden">‚Üê Back</button>
            </div>
        </section>

        <!-- PAGE 6: FLOWERS -->
        <section id="page-flowers" class="page">
            <div class="page-content">
                <h1 class="page-title">Flowers For You üåπ</h1>
                
                <div class="scrapbook-card flower-card">
                    <div class="polaroid-frame flower-polaroid">
                        <img 
                            id="flowerPhoto" 
                            class="flower-image" 
                            src="your-photo.jpg" 
                            alt="Flowers for you"
                        >
                    </div>
                    <p class="polaroid-caption">Forever yours üíï</p>
                </div>
            </div>

            <!-- Falling rose petals -->
            <div class="rose-petals"></div>
        </section>

        <!-- Navigation -->
        <div class="navigation">
            <button class="nav-btn active" data-page="password" title="Password">1</button>
            <button class="nav-btn" data-page="timer" title="Timer">2</button>
            <button class="nav-btn" data-page="movie" title="Movie">3</button>
            <button class="nav-btn" data-page="spotify" title="Playlist">4</button>
            <button class="nav-btn" data-page="letter" title="Letter">5</button>
            <button class="nav-btn" data-page="flowers" title="Flowers">6</button>
        </div>
    </div>

    <script>
        // ===== CONFIGURATION =====
        const CONFIG = {
            PASSWORD: 'love',
            RELATIONSHIP_START: new Date('2025-12-16'),
            LETTER_TEXT: `Dear my love,

Every moment with you feels like a dream I never want to wake up from. Since that beautiful day on December 16th, my life has been painted in colors I never knew existed.

You are my favorite person, my greatest adventure, and my home all at once. The way you smile, the way you understand me without words, the way your hand fits perfectly in mine‚Äîall of these remind me daily that you are my forever person.

Through laughter and tears, through easy days and difficult ones, you've been my rock, my safe harbor, my reason to smile.

I love you more than words could ever express. Thank you for choosing me, for loving me, and for being my greatest blessing.

Forever and always yours,
With all my love ‚ù§Ô∏è`
        };

        // ===== INITIALIZATION ===== 
        document.addEventListener('DOMContentLoaded', () => {
            setupPasswordPage();
            setupLetterPage();
            setupNavigation();
            setupMusicToggle();
            startTimer();
            
            // Start playing background music after user interaction
            document.addEventListener('click', playMusicOnce, { once: true });
        });

        let musicStarted = false;

        function playMusicOnce() {
            if (!musicStarted) {
                const bgMusic = document.getElementById('bgMusic');
                bgMusic.volume = 0.3;
                bgMusic.play().catch(() => {
                    console.log('Autoplay blocked - user will need to click music toggle');
                });
                musicStarted = true;
            }
        }

        // ===== PASSWORD PAGE ===== 
        function setupPasswordPage() {
            const passwordInput = document.getElementById('passwordInput');
            const passwordBtn = document.getElementById('passwordBtn');
            const errorMsg = document.getElementById('passwordError');

            passwordBtn.addEventListener('click', checkPassword);
            passwordInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') checkPassword();
            });

            function checkPassword() {
                const input = passwordInput.value;
                
                if (input === CONFIG.PASSWORD) {
                    playErrorSound();
                    transitionPages('password', 'timer');
                    passwordInput.value = '';
                    document.querySelector('.nav-btn[data-page="password"]').disabled = true;
                } else {
                    errorMsg.textContent = '‚ùå Wrong password. Try again!';
                    passwordInput.value = '';
                    setTimeout(() => {
                        errorMsg.textContent = '';
                    }, 2000);
                }
            }
        }

        // ===== PLAY SUCCESS SOUND =====
        function playErrorSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const now = audioContext.currentTime;
            
            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();
            
            osc.connect(gain);
            gain.connect(audioContext.destination);
            
            osc.frequency.setValueAtTime(400, now);
            osc.frequency.exponentialRampToValueAtTime(600, now + 0.2);
            
            gain.gain.setValueAtTime(0.3, now);
            gain.gain.exponentialRampToValueAtTime(0, now + 0.2);
            
            osc.start(now);
            osc.stop(now + 0.2);
        }

        // ===== TIMER ===== 
        function startTimer() {
            updateTimer();
            setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            const now = new Date();
            const start = CONFIG.RELATIONSHIP_START;
            
            let years = now.getFullYear() - start.getFullYear();
            let months = now.getMonth() - start.getMonth();
            let days = now.getDate() - start.getDate();
            
            if (days < 0) {
                months--;
                const lastDay = new Date(now.getFullYear(), now.getMonth(), 0);
                days += lastDay.getDate();
            }
            
            if (months < 0) {
                years--;
                months += 12;
            }
            
            const hours = now.getHours();
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();
            
            document.getElementById('timerYears').textContent = years;
            document.getElementById('timerMonths').textContent = months;
            document.getElementById('timerDays').textContent = days;
            document.getElementById('timerHours').textContent = String(hours).padStart(2, '0');
            document.getElementById('timerMinutes').textContent = String(minutes).padStart(2, '0');
            document.getElementById('timerSeconds').textContent = String(seconds).padStart(2, '0');
        }

        // ===== LETTER PAGE ===== 
        function setupLetterPage() {
            const envelope = document.getElementById('envelope');
            const letterOpened = document.getElementById('letterOpened');
            const closeBtn = document.getElementById('closeLetterBtn');

            envelope.addEventListener('click', openLetter);
            closeBtn.addEventListener('click', closeLetter);

            function openLetter() {
                envelope.classList.add('opened');
                setTimeout(() => {
                    envelope.style.display = 'none';
                    letterOpened.classList.add('show');
                    closeBtn.classList.remove('hidden');
                    typeLetterAnimation();
                }, 600);
            }

            function closeLetter() {
                letterOpened.classList.remove('show');
                closeBtn.classList.add('hidden');
                envelope.style.display = 'block';
                envelope.classList.remove('opened');
                document.getElementById('letterContent').textContent = '';
            }
        }

        function typeLetterAnimation() {
            const letterContent = document.getElementById('letterContent');
            const text = CONFIG.LETTER_TEXT;
            let index = 0;
            const typingSpeed = 20;

            function type() {
                if (index < text.length) {
                    const char = text.charAt(index);
                    if (char === '\n') {
                        letterContent.innerHTML += '<br>';
                    } else {
                        letterContent.textContent += char;
                    }
                    index++;
                    setTimeout(type, typingSpeed);
                }
            }

            type();
        }

        // ===== PAGE TRANSITIONS ===== 
        function transitionPages(fromPage, toPage) {
            const pageMap = {
                'password': 'page-password',
                'timer': 'page-timer',
                'movie': 'page-movie',
                'spotify': 'page-spotify',
                'letter': 'page-letter',
                'flowers': 'page-flowers'
            };
            
            const currentPage = document.getElementById(pageMap[fromPage]);
            const nextPage = document.getElementById(pageMap[toPage]);
            
            if (currentPage) currentPage.classList.remove('active');
            if (nextPage) nextPage.classList.add('active');
            
            updateNavigationButtons(toPage);
        }

        function updateNavigationButtons(pageKey) {
            document.querySelectorAll('.nav-btn').forEach((btn) => {
                btn.classList.toggle('active', btn.dataset.page === pageKey);
            });
        }

        // ===== NAVIGATION ===== 
        function setupNavigation() {
            const navButtons = document.querySelectorAll('.nav-btn');

            navButtons.forEach((btn) => {
                btn.addEventListener('click', () => {
                    if (!btn.disabled) {
                        const pageKey = btn.dataset.page;
                        const pageMap = {
                            'password': 'page-password',
                            'timer': 'page-timer',
                            'movie': 'page-movie',
                            'spotify': 'page-spotify',
                            'letter': 'page-letter',
                            'flowers': 'page-flowers'
                        };
                        
                        const pages = document.querySelectorAll('.page');
                        pages.forEach(page => page.classList.remove('active'));
                        document.getElementById(pageMap[pageKey]).classList.add('active');
                        updateNavigationButtons(pageKey);

                        if (pageKey === 'flowers') {
                            startRosePetals();
                        }
                    }
                });
            });
        }

        // ===== MUSIC TOGGLE ===== 
        function setupMusicToggle() {
            const musicToggle = document.getElementById('musicToggle');
            const bgMusic = document.getElementById('bgMusic');

            musicToggle.addEventListener('click', () => {
                if (bgMusic.paused) {
                    bgMusic.play().catch(() => console.log('Playback failed'));
                    musicToggle.querySelector('.music-icon').textContent = 'üîä';
                } else {
                    bgMusic.pause();
                    musicToggle.querySelector('.music-icon').textContent = 'üîá';
                }
            });
        }

        // ===== ROSE PETALS ===== 
        function startRosePetals() {
            const petalsContainer = document.querySelector('.rose-petals');
            let petalInterval;

            function createPetal() {
                const page6 = document.getElementById('page-flowers');
                if (!page6 || !page6.classList.contains('active')) {
                    clearInterval(petalInterval);
                    return;
                }

                const petal = document.createElement('div');
                petal.className = 'petal';
                petal.textContent = 'üåπ';
                petal.style.left = Math.random() * 100 + '%';
                petal.style.top = '-50px';
                petal.style.animationDuration = (Math.random() * 3 + 5) + 's';
                
                petalsContainer.appendChild(petal);

                setTimeout(() => petal.remove(), 8000);
            }

            petalInterval = setInterval(createPetal, 500);
        }
    </script>
</body>
</html>
